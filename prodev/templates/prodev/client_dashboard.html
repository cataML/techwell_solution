{% extends "base_prodev.html" %}
{% load static %}
{% block title %}Prodev | Dashboard{% endblock %}
{%  block content %}
<section class="client-section">
    <div class="sidebar">
        <h2>Client Panel</h2>
        <ul>
            <li><a href="https://github.com/cataML?tab=repositories">My Projects</a></li>
            <li><a href="{% url 'prodev:client_messages' %}">Messages</a></li>
            <li><a href="{% url 'prodev:client_payments' %}">Payments</a></li>
            <li><a href="{% url 'prodev:contact' %}">Support</a></li>
            <li><a href="{% url 'prodev:index' %}">Back to home</a></li>
            <li><a href="{% url 'prodev:logout' %}">Logout</a></li>
            

        </ul>
    </div>

    <div class="main">

        <header>
            <h1>Welcome, {{ request.user.username }}</h1>
        </header>

        <section class="stats">
            <div class="card">
                <h3>Active Projects</h3>
                <p>{{ active_projects }}</p>
            </div>
            <div class="card">
                <h3>Pending Payments</h3>
                <p>{{ pending_payments }}</p>
            </div>
            <div class="card">
                <h3>Unread Messages</h3>
                <p>{{ unread_messages }}</p>
            </div>
        </section>

        <section class="content">
            <h2>Your Recent Activity</h2>
            <div class="activity-card">
                {% if activity %}
                    {% for item in activity %}
                        <p>â€¢ {{ item.text }}</p>
                    {% endfor %}
                {% else %}
                    <p>No recent activity.</p>
                {% endif %}
            </div>
        </section>

    </div>
</section>
<section class="projects">
    <h2>Your Projects</h2>

    {% for project in projects %}
        <div class="project-card">
            <h3>{{ project.title }}</h3>
            <p>Status: {{ project.status }}</p>
            <p>Amount: ${{ project.amount }}</p>

            {% if project.status != "completed" %}
                <a href="{% url 'initiate_payment' 'prodev' %}?amount={{ project.amount }}&description={{ project.title }}" 
                   class="btn pay-btn">
                   Pay Now
                </a>
            {% else %}
                <p class="paid">Payment Completed</p>
            {% endif %}
        </div>
    {% endfor %}
</section>
{%  endblock %}